# 校园跑腿平台 - 项目结构说明

## 项目概述

校园跑腿平台是一个基于微信小程序的校园服务平台，提供快递代取、外卖配送、代购服务等功能。

## 技术栈

### 后端 (errand-back)
- **框架**: Node.js + Express
- **数据库**: MySQL
- **认证**: JWT
- **密码加密**: bcryptjs

### 前端 (errand-front)
- **框架**: 微信小程序原生开发
- **UI**: 自定义组件 + 主题系统
- **状态管理**: 全局 App 对象

## 项目结构

```
campus-errand/
├── docs/                           # 项目文档
│   ├── BACKEND_APIS.md            # 后端 API 文档
│   ├── 功能更新说明.md             # 功能更新记录
│   ├── 界面优化说明.md             # 界面优化记录
│   ├── 色彩体系规范文档.md         # 色彩规范
│   ├── 色彩对比度优化方案.md       # 色彩优化方案
│   ├── 色彩对比度优化完成报告.md   # 色彩优化报告
│   ├── 未登录用户体验优化.md       # 未登录用户体验优化
│   └── 项目结构说明.md             # 本文件
│
├── errand-back/                    # 后端项目
│   ├── database/                   # 数据库文件
│   │   ├── migrations/            # 数据库迁移（表结构）
│   │   ├── seeds/                 # 数据库种子（测试数据）
│   │   └── README.md              # 数据库文档
│   ├── src/                       # 源代码
│   │   ├── config/                # 配置文件
│   │   ├── controllers/           # 控制器
│   │   ├── middleware/            # 中间件
│   │   ├── models/                # 数据模型
│   │   ├── routes/                # 路由
│   │   └── app.js                 # 应用入口
│   ├── .env                       # 环境变量（不提交到 Git）
│   ├── .env.example               # 环境变量示例
│   ├── package.json               # 依赖配置
│   ├── server.js                  # 服务器启动文件
│   ├── setup-database.bat         # 数据库初始化脚本
│   ├── start-dev.bat              # 开发环境启动脚本
│   ├── start-server.bat           # 生产环境启动脚本
│   ├── update-and-start.bat       # 更新并启动脚本
│   ├── test-all-apis.js           # API 测试脚本
│   ├── test-accept-order.js       # 接单功能测试
│   ├── API-DOCUMENTATION.md       # API 文档
│   └── README.md                  # 后端说明文档
│
├── errand-front/                   # 前端项目（微信小程序）
│   ├── api/                       # API 接口封装
│   │   ├── request.js             # 请求封装
│   │   ├── order.js               # 订单 API
│   │   ├── user.js                # 用户 API
│   │   ├── notification.js        # 通知 API
│   │   └── system.js              # 系统 API
│   ├── components/                # 自定义组件
│   ├── images/                    # 图片资源
│   ├── pages/                     # 页面
│   │   ├── index/                 # 首页
│   │   ├── order/                 # 订单页面
│   │   ├── publish/               # 发布订单
│   │   ├── user/                  # 用户中心
│   │   ├── login/                 # 登录页面
│   │   └── notification/          # 通知页面
│   ├── styles/                    # 全局样式
│   │   └── theme.wxss             # 主题样式
│   ├── utils/                     # 工具函数
│   │   ├── auth.js                # 认证工具
│   │   ├── config.js              # 配置文件
│   │   └── util.js                # 通用工具
│   ├── app.js                     # 小程序入口
│   ├── app.json                   # 小程序配置
│   ├── app.wxss                   # 全局样式
│   ├── project.config.json        # 项目配置
│   └── sitemap.json               # 站点地图
│
├── .gitignore                     # Git 忽略文件
└── README.md                      # 项目说明文档
```

## 核心功能模块

### 1. 用户系统
- 用户注册/登录
- 用户信息管理
- 实名认证
- 账户余额

### 2. 订单系统
- 发布订单
- 浏览订单
- 接单
- 订单状态管理（待接单、已接单、已完成、已取消）
- 订单搜索和筛选

### 3. 通知系统
- 订单通知
- 系统通知
- 未读消息提醒

### 4. 服务类型
- 快递代取
- 外卖配送
- 代购服务
- 其他服务

## 开发指南

### 后端开发

#### 环境要求
- Node.js >= 14.x
- MySQL >= 5.7
- npm 或 yarn

#### 启动步骤
```bash
# 1. 进入后端目录
cd errand-back

# 2. 安装依赖
npm install

# 3. 配置环境变量
# 复制 .env.example 为 .env，并修改配置

# 4. 初始化数据库
setup-database.bat

# 5. 启动开发服务器
start-dev.bat
```

#### API 测试
```bash
# 测试所有 API
node test-all-apis.js

# 测试接单功能
node test-accept-order.js
```

### 前端开发

#### 环境要求
- 微信开发者工具
- 微信小程序账号

#### 启动步骤
```bash
# 1. 使用微信开发者工具打开 errand-front 目录

# 2. 修改 utils/config.js 中的 baseUrl 为后端地址

# 3. 编译并预览
```

## 部署指南

### 后端部署

1. 配置生产环境变量
2. 安装依赖：`npm install --production`
3. 初始化数据库
4. 启动服务：`npm start`

### 前端部署

1. 在微信开发者工具中上传代码
2. 在微信公众平台提交审核
3. 审核通过后发布

## 常见问题

### 1. 数据库连接失败
- 检查 MySQL 服务是否启动
- 检查 .env 文件中的数据库配置
- 确认数据库用户权限

### 2. 前端无法连接后端
- 检查后端服务是否启动
- 检查 config.js 中的 baseUrl 配置
- 确认网络连接正常

### 3. 登录失败
- 检查用户名和密码是否正确
- 查看后端日志排查问题
- 确认 JWT 配置正确

## 贡献指南

1. Fork 本项目
2. 创建特性分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 开启 Pull Request

## 许可证

本项目仅供学习和研究使用。

## 联系方式

如有问题，请提交 Issue 或联系项目维护者。
