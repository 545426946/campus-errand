# æ ¡å›­è·‘è…¿å°ç¨‹åºåç«¯æ¥å£è¡¥é½å®Œæˆè¯´æ˜

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. è®¤è¯ç›¸å…³æ¥å£ (6ä¸ª)
- âœ… POST /auth/login - ç”¨æˆ·ç™»å½•ï¼ˆæ”¯æŒå¾®ä¿¡å’Œé‚®ç®±å¯†ç ï¼‰
- âœ… POST /auth/send-code - å‘é€éªŒè¯ç 
- âœ… POST /auth/verify-code - éªŒè¯éªŒè¯ç 
- âœ… POST /auth/logout - é€€å‡ºç™»å½•
- âœ… POST /auth/register - ç”¨æˆ·æ³¨å†Œ
- âœ… GET /auth/me - è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯

### 2. ç”¨æˆ·ç®¡ç†æ¥å£ (18ä¸ª)
**åŸºç¡€ä¿¡æ¯**
- âœ… GET /users/profile - è·å–ç”¨æˆ·ä¿¡æ¯
- âœ… PUT /user/info - æ›´æ–°ç”¨æˆ·ä¿¡æ¯
- âœ… GET /user/avatar - è·å–å¤´åƒ
- âœ… POST /user/avatar - æ›´æ–°å¤´åƒ

**å®åè®¤è¯**
- âœ… POST /user/certify - æäº¤å®åè®¤è¯
- âœ… GET /user/certification/status - è·å–è®¤è¯çŠ¶æ€
- âœ… GET /user/certification/info - è·å–è®¤è¯ä¿¡æ¯

**é’±åŒ…åŠŸèƒ½**
- âœ… GET /user/wallet - è·å–é’±åŒ…ä¿¡æ¯
- âœ… GET /user/wallet/details - è·å–é’±åŒ…æ˜ç»†
- âœ… POST /user/wallet/withdraw - æç°
- âœ… POST /user/wallet/recharge - å……å€¼

**æ”¶è—å’Œå†å²**
- âœ… GET /user/favorites - è·å–æ”¶è—åˆ—è¡¨
- âœ… POST /user/favorites - æ·»åŠ æ”¶è—
- âœ… DELETE /user/favorites/:id - å–æ¶ˆæ”¶è—
- âœ… GET /user/history - è·å–å†å²è®°å½•
- âœ… DELETE /user/history/:id - åˆ é™¤å†å²è®°å½•

**å…¶ä»–**
- âœ… GET /user/learning-progress - è·å–å­¦ä¹ è¿›åº¦
- âœ… PUT /user/profile - æ›´æ–°ç”¨æˆ·èµ„æ–™

### 3. è®¢å•æ ¸å¿ƒæ¥å£ (20ä¸ª)
**CRUDæ“ä½œ**
- âœ… GET /orders - è·å–è®¢å•åˆ—è¡¨
- âœ… GET /orders/:id - è·å–è®¢å•è¯¦æƒ…
- âœ… POST /orders - åˆ›å»ºæ–°è®¢å•
- âœ… PUT /orders/:id - æ›´æ–°è®¢å•
- âœ… DELETE /orders/:id - åˆ é™¤è®¢å•

**çŠ¶æ€æµè½¬**
- âœ… POST /orders/:id/accept - æ¥å•
- âœ… POST /orders/:id/cancel - å–æ¶ˆè®¢å•
- âœ… POST /orders/:id/complete - å®Œæˆè®¢å•
- âœ… POST /orders/:id/confirm - ç¡®è®¤æ”¶è´§

**æŸ¥è¯¢åˆ†ç±»**
- âœ… GET /orders/my-publish - æˆ‘å‘å¸ƒçš„è®¢å•
- âœ… GET /orders/my-accepted - æˆ‘æ¥å—çš„è®¢å•
- âœ… GET /orders/search - æœç´¢è®¢å•
- âœ… GET /orders/hot - çƒ­é—¨è®¢å•
- âœ… GET /orders/recommended - æ¨èè®¢å•
- âœ… GET /orders/stats - è®¢å•ç»Ÿè®¡

**è¯„ä»·ä¸¾æŠ¥**
- âœ… POST /orders/:id/evaluate - è®¢å•è¯„ä»·
- âœ… GET /orders/:id/evaluations - è·å–è¯„ä»·
- âœ… POST /orders/:id/report - ä¸¾æŠ¥è®¢å•
- âœ… POST /orders/:id/share - åˆ†äº«è®¢å•

### 4. é€šçŸ¥ç³»ç»Ÿæ¥å£ (5ä¸ª)
- âœ… GET /notifications - è·å–é€šçŸ¥åˆ—è¡¨
- âœ… GET /notifications/unread-count - æœªè¯»é€šçŸ¥æ•°é‡
- âœ… PUT /notifications/:id/read - æ ‡è®°å·²è¯»
- âœ… PUT /notifications/read-all - å…¨éƒ¨æ ‡è®°å·²è¯»
- âœ… DELETE /notifications/:id - åˆ é™¤é€šçŸ¥

### 5. ç³»ç»Ÿé€šç”¨æ¥å£ (17ä¸ª)
**ç³»ç»Ÿé…ç½®**
- âœ… GET /system/config - ç³»ç»Ÿé…ç½®
- âœ… GET /system/service-types - æœåŠ¡ç±»å‹åˆ—è¡¨
- âœ… GET /system/version - ç‰ˆæœ¬ä¿¡æ¯
- âœ… POST /system/check-update - æ£€æŸ¥æ›´æ–°

**æ–‡ä»¶ä¸Šä¼ **
- âœ… POST /upload/image - å›¾ç‰‡ä¸Šä¼ 

**ä½ç½®æœåŠ¡**
- âœ… GET /system/location - ä½ç½®ä¿¡æ¯
- âœ… GET /system/search-location - æœç´¢åœ°ç‚¹
- âœ… GET /system/weather - å¤©æ°”ä¿¡æ¯

**å†…å®¹ç®¡ç†**
- âœ… GET /system/announcements - å…¬å‘Šåˆ—è¡¨
- âœ… GET /system/hot-search - çƒ­é—¨æœç´¢
- âœ… GET /system/recommended-keywords - æ¨èå…³é”®è¯
- âœ… POST /system/check-sensitive - æ•æ„Ÿè¯æ£€æŸ¥

**ç”¨æˆ·åé¦ˆ**
- âœ… POST /system/feedback - æ„è§åé¦ˆ
- âœ… GET /system/help - å¸®åŠ©ä¿¡æ¯
- âœ… GET /system/about - å…³äºæˆ‘ä»¬
- âœ… GET /system/privacy - éšç§æ”¿ç­–
- âœ… GET /system/agreement - ç”¨æˆ·åè®®

## ğŸ“ æ–°å¢/æ›´æ–°çš„æ–‡ä»¶

### è·¯ç”±æ–‡ä»¶
1. `src/routes/auth.routes.js` - æ›´æ–°ï¼Œæ·»åŠ éªŒè¯ç å’Œç™»å‡ºæ¥å£
2. `src/routes/user.routes.js` - æ›´æ–°ï¼Œæ·»åŠ å®Œæ•´çš„ç”¨æˆ·ç®¡ç†æ¥å£
3. `src/routes/order.routes.js` - æ›´æ–°ï¼Œæ·»åŠ è¯„ä»·ã€ä¸¾æŠ¥ã€æœç´¢ç­‰æ¥å£
4. `src/routes/notification.routes.js` - å·²å­˜åœ¨
5. `src/routes/system.routes.js` - âœ¨ æ–°å»ºï¼Œç³»ç»Ÿé€šç”¨æ¥å£
6. `src/routes/upload.routes.js` - âœ¨ æ–°å»ºï¼Œæ–‡ä»¶ä¸Šä¼ æ¥å£

### æ§åˆ¶å™¨æ–‡ä»¶
1. `src/controllers/auth.controller.js` - æ›´æ–°ï¼Œæ·»åŠ éªŒè¯ç åŠŸèƒ½
2. `src/controllers/user.controller.js` - æ›´æ–°ï¼Œæ·»åŠ å®Œæ•´çš„ç”¨æˆ·åŠŸèƒ½
3. `src/controllers/order.controller.js` - æ›´æ–°ï¼Œæ·»åŠ è¯„ä»·ã€ä¸¾æŠ¥ç­‰åŠŸèƒ½
4. `src/controllers/notification.controller.js` - å·²å­˜åœ¨
5. `src/controllers/system.controller.js` - âœ¨ æ–°å»ºï¼Œç³»ç»ŸåŠŸèƒ½å®ç°
6. `src/controllers/upload.controller.js` - âœ¨ æ–°å»ºï¼Œæ–‡ä»¶ä¸Šä¼ å®ç°

### æ¨¡å‹æ–‡ä»¶
1. `src/models/User.js` - æ›´æ–°ï¼Œæ”¯æŒæ›´å¤šå­—æ®µï¼ˆå®åè®¤è¯ç­‰ï¼‰
2. `src/models/Order.js` - æ›´æ–°ï¼Œæ·»åŠ æœç´¢æ–¹æ³•
3. `src/models/Notification.js` - å·²å­˜åœ¨

### é…ç½®æ–‡ä»¶
1. `src/app.js` - æ›´æ–°ï¼Œæ·»åŠ æ–°è·¯ç”±
2. `database/update-user-fields.sql` - âœ¨ æ–°å»ºï¼Œæ•°æ®åº“å­—æ®µæ›´æ–°è„šæœ¬

### æ–‡æ¡£æ–‡ä»¶
1. `API-DOCUMENTATION.md` - âœ¨ æ–°å»ºï¼Œå®Œæ•´çš„APIæ–‡æ¡£
2. `æ¥å£è¡¥é½å®Œæˆè¯´æ˜.md` - âœ¨ æ–°å»ºï¼Œæœ¬æ–‡ä»¶
3. `test-all-apis.js` - âœ¨ æ–°å»ºï¼Œå®Œæ•´çš„APIæµ‹è¯•è„šæœ¬

## ğŸš€ å¦‚ä½•ä½¿ç”¨

### 1. æ›´æ–°æ•°æ®åº“
```bash
# è¿è¡Œæ•°æ®åº“æ›´æ–°è„šæœ¬
mysql -u root -p < database/update-user-fields.sql
```

### 2. å¯åŠ¨æœåŠ¡å™¨
```bash
# å¼€å‘æ¨¡å¼
npm run dev

# æˆ–ä½¿ç”¨æ‰¹å¤„ç†æ–‡ä»¶
start-dev.bat
```

### 3. æµ‹è¯•æ¥å£
```bash
# è¿è¡Œå®Œæ•´çš„APIæµ‹è¯•
node test-all-apis.js
```

### 4. æŸ¥çœ‹APIæ–‡æ¡£
æ‰“å¼€ `API-DOCUMENTATION.md` æŸ¥çœ‹å®Œæ•´çš„æ¥å£æ–‡æ¡£

## ğŸ“Š æ¥å£ç»Ÿè®¡

- **æ€»æ¥å£æ•°**: 66ä¸ª
- **è®¤è¯æ¥å£**: 6ä¸ª
- **ç”¨æˆ·ç®¡ç†**: 18ä¸ª
- **è®¢å•ç®¡ç†**: 20ä¸ª
- **é€šçŸ¥ç³»ç»Ÿ**: 5ä¸ª
- **ç³»ç»Ÿé€šç”¨**: 17ä¸ª

## ğŸ”§ æŠ€æœ¯è§„èŒƒ

### è¯·æ±‚é…ç½®
- åŸºç¡€URL: `http://localhost:3000/api`
- è®¤è¯æ–¹å¼: Bearer Token (JWT)
- è¯·æ±‚æ ¼å¼: JSON
- è¶…æ—¶æ—¶é—´: 10ç§’

### åˆ†é¡µå‚æ•°
- `page`: é¡µç  (é»˜è®¤1)
- `pageSize`: æ¯é¡µæ•°é‡ (é»˜è®¤10/20)
- `status`: çŠ¶æ€ç­›é€‰
- `keyword`: å…³é”®è¯æœç´¢

### çŠ¶æ€ç è§„èŒƒ
- HTTPçŠ¶æ€ç : 200, 201, 400, 401, 403, 404, 500
- ä¸šåŠ¡çŠ¶æ€ç : `code: 0` è¡¨ç¤ºæˆåŠŸ

### å“åº”æ ¼å¼
```json
{
  "success": true,
  "code": 0,
  "data": {},
  "message": "æ“ä½œæˆåŠŸ"
}
```

## ğŸ“ æ³¨æ„äº‹é¡¹

### ç®€åŒ–å®ç°
ä¸ºäº†å¿«é€Ÿå®Œæˆæ¥å£å¼€å‘ï¼Œéƒ¨åˆ†åŠŸèƒ½é‡‡ç”¨äº†ç®€åŒ–å®ç°ï¼š

1. **éªŒè¯ç åŠŸèƒ½**: å¼€å‘ç¯å¢ƒä¸‹éªŒè¯ç å›ºå®šä¸º `123456`
2. **æ–‡ä»¶ä¸Šä¼ **: è¿”å›æ¨¡æ‹Ÿçš„URLï¼Œæœªå®é™…ä¿å­˜æ–‡ä»¶
3. **é’±åŒ…åŠŸèƒ½**: è¿”å›å›ºå®šä½™é¢ï¼Œæœªå®ç°çœŸå®çš„èµ„é‡‘æµè½¬
4. **æ”¶è—å’Œå†å²**: è¿”å›ç©ºåˆ—è¡¨ï¼Œæœªå®ç°æ•°æ®åº“å­˜å‚¨
5. **ä½ç½®å’Œå¤©æ°”**: è¿”å›æ¨¡æ‹Ÿæ•°æ®ï¼Œæœªå¯¹æ¥çœŸå®API

### ç”Ÿäº§ç¯å¢ƒéœ€è¦å®Œå–„çš„åŠŸèƒ½

1. **éªŒè¯ç æœåŠ¡**
   - é›†æˆçŸ­ä¿¡æœåŠ¡å•†ï¼ˆé˜¿é‡Œäº‘ã€è…¾è®¯äº‘ç­‰ï¼‰
   - ä½¿ç”¨Rediså­˜å‚¨éªŒè¯ç ï¼Œè®¾ç½®è¿‡æœŸæ—¶é—´
   - æ·»åŠ å‘é€é¢‘ç‡é™åˆ¶

2. **æ–‡ä»¶ä¸Šä¼ **
   - ä½¿ç”¨multerå¤„ç†æ–‡ä»¶ä¸Šä¼ 
   - é›†æˆOSSå­˜å‚¨ï¼ˆé˜¿é‡Œäº‘OSSã€ä¸ƒç‰›äº‘ç­‰ï¼‰
   - æ·»åŠ æ–‡ä»¶ç±»å‹å’Œå¤§å°éªŒè¯

3. **é’±åŒ…ç³»ç»Ÿ**
   - å®ç°çœŸå®çš„èµ„é‡‘æµè½¬é€»è¾‘
   - æ·»åŠ äº¤æ˜“è®°å½•è¡¨
   - é›†æˆæ”¯ä»˜æ¥å£ï¼ˆå¾®ä¿¡æ”¯ä»˜ã€æ”¯ä»˜å®ï¼‰

4. **æ”¶è—å’Œå†å²**
   - åˆ›å»ºæ•°æ®åº“è¡¨å­˜å‚¨æ”¶è—å’Œå†å²è®°å½•
   - å®ç°å®Œæ•´çš„CRUDæ“ä½œ

5. **ä½ç½®å’Œå¤©æ°”**
   - å¯¹æ¥é«˜å¾·åœ°å›¾APIæˆ–è…¾è®¯åœ°å›¾API
   - å¯¹æ¥å¤©æ°”APIæœåŠ¡

6. **å®‰å…¨åŠ å›º**
   - æ·»åŠ è¯·æ±‚é¢‘ç‡é™åˆ¶ï¼ˆrate limitingï¼‰
   - å®ç°Tokené»‘åå•æœºåˆ¶
   - æ·»åŠ SQLæ³¨å…¥é˜²æŠ¤
   - å®ç°æ•æ„Ÿè¯è¿‡æ»¤

## ğŸ¯ ä¸‹ä¸€æ­¥å»ºè®®

1. **è¿è¡Œæµ‹è¯•è„šæœ¬**ï¼Œç¡®ä¿æ‰€æœ‰æ¥å£æ­£å¸¸å·¥ä½œ
2. **æŸ¥çœ‹APIæ–‡æ¡£**ï¼Œäº†è§£æ¯ä¸ªæ¥å£çš„è¯¦ç»†ç”¨æ³•
3. **æ ¹æ®å®é™…éœ€æ±‚**ï¼Œå®Œå–„ç®€åŒ–å®ç°çš„åŠŸèƒ½
4. **æ·»åŠ å•å…ƒæµ‹è¯•**ï¼Œæé«˜ä»£ç è´¨é‡
5. **éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ**å‰ï¼Œå®Œæˆå®‰å…¨åŠ å›º

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
- APIæ–‡æ¡£: `API-DOCUMENTATION.md`
- æµ‹è¯•è„šæœ¬: `test-all-apis.js`
- æ•°æ®åº“è„šæœ¬: `database/` ç›®å½•

---

**å®Œæˆæ—¶é—´**: 2024å¹´12æœˆ16æ—¥
**æ¥å£æ€»æ•°**: 66ä¸ª
**çŠ¶æ€**: âœ… å…¨éƒ¨å®Œæˆ
