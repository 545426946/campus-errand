<view class="page-container">
  <!-- ç»Ÿè®¡å¡ç‰‡ -->
  <view class="stats-section">
    <view class="stats-title">åé¦ˆå†å²ç»Ÿè®¡</view>
    <view class="stats-grid">
      <view class="stat-item">
        <text class="stat-value">{{stats.total}}</text>
        <text class="stat-label">æ€»è®¡</text>
      </view>
      <view class="stat-item">
        <text class="stat-value">{{stats.today}}</text>
        <text class="stat-label">ä»Šå¤©</text>
      </view>
      <view class="stat-item">
        <text class="stat-value">{{stats.thisWeek}}</text>
        <text class="stat-label">æœ¬å‘¨</text>
      </view>
      <view class="stat-item">
        <text class="stat-value">{{stats.thisMonth}}</text>
        <text class="stat-label">æœ¬æœˆ</text>
      </view>
    </view>
  </view>

  <!-- åé¦ˆåˆ—è¡¨ -->
  <view class="feedback-list">
    <view class="feedback-item"
          wx:for="{{feedbackList}}"
          wx:key="id"
          bindtap="viewDetail"
          data-feedback="{{item}}">
      
      <!-- å¤´éƒ¨ä¿¡æ¯ -->
      <view class="item-header">
        <view class="type-badge" style="background: {{typeMap[item.type].color}}20; color: {{typeMap[item.type].color}}">
          <text class="type-icon">{{typeMap[item.type].icon}}</text>
          <text class="type-name">{{typeMap[item.type].name}}</text>
        </view>
        <view class="status-badge" style="background: {{statusMap[item.status].color}}20; color: {{statusMap[item.status].color}}">
          <text class="status-icon">{{statusMap[item.status].icon}}</text>
          <text class="status-name">{{statusMap[item.status].name}}</text>
        </view>
      </view>

      <!-- æ ‡é¢˜ -->
      <view class="item-title">{{item.title}}</view>

      <!-- å†…å®¹é¢„è§ˆ -->
      <view class="item-content">{{item.content}}</view>

      <!-- å›¾ç‰‡é¢„è§ˆ -->
      <view class="item-images" wx:if="{{item.images && item.images.length > 0}}" catchtap="previewImages" data-images="{{item.images}}">
        <image class="preview-image"
               wx:for="{{item.images}}"
               wx:for-item="img"
               wx:key="*this"
               src="{{img}}"
               mode="aspectFill"></image>
        <view class="image-count" wx:if="{{item.images.length > 3}}">
          +{{item.images.length - 3}}
        </view>
      </view>

      <!-- å›å¤ä¿¡æ¯ -->
      <view class="item-reply" wx:if="{{item.reply}}">
        <view class="reply-label">
          <text class="reply-icon">ğŸ’¬</text>
          <text>å®˜æ–¹å›å¤</text>
        </view>
        <view class="reply-content">{{item.reply}}</view>
      </view>

      <!-- åº•éƒ¨ä¿¡æ¯ -->
      <view class="item-footer">
        <text class="item-time">{{formatTime(item.created_at)}}</text>
        <text class="item-id">#{{item.id}}</text>
      </view>
    </view>

    <!-- åŠ è½½çŠ¶æ€ -->
    <view class="loading-more" wx:if="{{loading && !refreshing}}">
      <text class="loading-text">åŠ è½½ä¸­...</text>
    </view>

    <view class="no-more" wx:if="{{!hasMore && feedbackList.length > 0}}">
      <text class="no-more-text">æ²¡æœ‰æ›´å¤šäº†</text>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{!loading && feedbackList.length === 0}}">
    <text class="empty-icon">ğŸ“‹</text>
    <text class="empty-text">æš‚æ— åé¦ˆè®°å½•</text>
    <text class="empty-desc">å¼€å§‹ä½¿ç”¨åå°†æ˜¾ç¤ºæ‚¨çš„åé¦ˆè®°å½•</text>
  </view>

  <!-- æ–°å»ºåé¦ˆæŒ‰é’® -->
  <view class="fab-button" bindtap="createFeedback">
    <text class="fab-icon">âœï¸</text>
  </view>
</view>
