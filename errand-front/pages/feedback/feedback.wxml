<view class="page-container">
  <!-- åé¦ˆç±»å‹é€‰æ‹© -->
  <view class="type-section">
    <text class="section-title">åé¦ˆç±»å‹</text>
    <view class="type-grid">
      <view class="type-item {{selectedType.id === type.id ? 'selected' : ''}}"
            wx:for="{{feedbackTypes}}" 
            wx:key="id"
            bindtap="selectType"
            data-type="{{type}}">
        <text class="type-icon">{{type.icon}}</text>
        <text class="type-name">{{type.name}}</text>
      </view>
    </view>
  </view>

  <!-- åé¦ˆè¡¨å• -->
  <view class="form-section">
    <view class="form-item">
      <text class="form-label">åé¦ˆæ ‡é¢˜ *</text>
      <input class="form-input {{errors.title ? 'error' : ''}}"
             placeholder="è¯·ç®€è¦æè¿°æ‚¨çš„é—®é¢˜æˆ–å»ºè®®"
             value="{{formData.title}}"
             bindinput="onInputChange"
             data-field="title"
             maxlength="50" />
      <text class="error-text" wx:if="{{errors.title}}">{{errors.title}}</text>
      <text class="char-count">{{formData.title.length}}/50</text>
    </view>

    <view class="form-item">
      <text class="form-label">è¯¦ç»†æè¿° *</text>
      <textarea class="form-textarea {{errors.content ? 'error' : ''}}"
                placeholder="è¯·è¯¦ç»†æè¿°æ‚¨é‡åˆ°çš„é—®é¢˜æˆ–å»ºè®®ï¼Œä»¥ä¾¿æˆ‘ä»¬æ›´å¥½åœ°ä¸ºæ‚¨æœåŠ¡"
                value="{{formData.content}}"
                bindinput="onInputChange"
                data-field="content"
                maxlength="500"
                auto-height></textarea>
      <text class="error-text" wx:if="{{errors.content}}">{{errors.content}}</text>
      <text class="char-count">{{formData.content.length}}/500</text>
    </view>

    <view class="form-item">
      <text class="form-label">è”ç³»æ–¹å¼</text>
      <input class="form-input {{errors.contact ? 'error' : ''}}"
             placeholder="æ‰‹æœºå·æˆ–é‚®ç®±ï¼Œæ–¹ä¾¿æˆ‘ä»¬è”ç³»æ‚¨ï¼ˆé€‰å¡«ï¼‰"
             value="{{formData.contact}}"
             bindinput="onInputChange"
             data-field="contact" />
      <text class="error-text" wx:if="{{errors.contact}}">{{errors.contact}}</text>
    </view>

    <!-- å›¾ç‰‡ä¸Šä¼  -->
    <view class="form-item">
      <text class="form-label">ç›¸å…³å›¾ç‰‡</text>
      <view class="image-upload">
        <view class="image-list">
          <view class="image-item" 
                wx:for="{{formData.images}}" 
                wx:key="*this">
            <image class="uploaded-image" 
                   src="{{item}}" 
                   mode="aspectFill"
                   bindtap="onPreviewImage"
                   data-url="{{item}}"></image>
            <view class="delete-btn" 
                  bindtap="onDeleteImage"
                  data-index="{{index}}">
              <text class="delete-icon">âœ•</text>
            </view>
          </view>
          
          <view class="upload-btn {{formData.images.length >= 4 ? 'disabled' : ''}}"
                bindtap="onUploadImage"
                wx:if="{{formData.images.length < 4}}">
            <text class="upload-icon">ğŸ“·</text>
            <text class="upload-text">æ·»åŠ å›¾ç‰‡</text>
          </view>
        </view>
        <text class="upload-desc">æœ€å¤šä¸Šä¼ 4å¼ å›¾ç‰‡ï¼Œæ¯å¼ ä¸è¶…è¿‡5MB</text>
      </view>
    </view>
  </view>

  <!-- æäº¤æŒ‰é’® -->
  <view class="submit-section">
    <button class="submit-btn {{submitting ? 'loading' : ''}}" 
            bindtap="onSubmitFeedback"
            disabled="{{submitting}}">
      {{submitting ? 'æäº¤ä¸­...' : 'æäº¤åé¦ˆ'}}
    </button>
    
    <view class="action-links">
      <text class="link-text" bindtap="onViewHistory">æŸ¥çœ‹åé¦ˆè®°å½•</text>
    </view>
  </view>

  <!-- æ¸©é¦¨æç¤º -->
  <view class="tips-section">
    <view class="tips-header">
      <text class="tips-icon">ğŸ’¡</text>
      <text class="tips-title">æ¸©é¦¨æç¤º</text>
    </view>
    <view class="tips-list">
      <text class="tips-item">â€¢ è¯·å°½å¯èƒ½è¯¦ç»†åœ°æè¿°æ‚¨é‡åˆ°çš„é—®é¢˜</text>
      <text class="tips-item">â€¢ ä¸Šä¼ ç›¸å…³æˆªå›¾èƒ½å¸®åŠ©æˆ‘ä»¬æ›´å¿«å®šä½é—®é¢˜</text>
      <text class="tips-item">â€¢ æˆ‘ä»¬ä¼šåœ¨æ”¶åˆ°åé¦ˆå24å°æ—¶å†…å›å¤æ‚¨</text>
      <text class="tips-item">â€¢ å¦‚æœ‰ç´§æ€¥é—®é¢˜ï¼Œè¯·ç›´æ¥è”ç³»å®¢æœ</text>
    </view>
  </view>
</view>