<view class="page-container">
  <!-- ç»Ÿè®¡å¡ç‰‡ -->
  <view class="stats-section">
    <view class="stats-title">è®¢å•å†å²ç»Ÿè®¡</view>
    <view class="stats-grid">
      <view class="stat-item">
        <text class="stat-value">{{stats.publishTotal}}</text>
        <text class="stat-label">å‘å¸ƒæ€»æ•°</text>
      </view>
      <view class="stat-item">
        <text class="stat-value">{{stats.publishToday}}</text>
        <text class="stat-label">ä»Šæ—¥å‘å¸ƒ</text>
      </view>
      <view class="stat-item">
        <text class="stat-value">{{stats.acceptedTotal}}</text>
        <text class="stat-label">æ¥å•æ€»æ•°</text>
      </view>
      <view class="stat-item">
        <text class="stat-value">{{stats.acceptedToday}}</text>
        <text class="stat-label">ä»Šæ—¥æ¥å•</text>
      </view>
    </view>
  </view>

  <!-- æ ‡ç­¾åˆ‡æ¢ -->
  <view class="tabs-section">
    <view class="tabs">
      <view class="tab {{currentTab === 'publish' ? 'active' : ''}}"
            bindtap="switchTab"
            data-tab="publish">
        <text class="tab-text">æˆ‘å‘å¸ƒçš„</text>
        <text class="tab-count">({{publishTotal}})</text>
      </view>
      <view class="tab {{currentTab === 'accepted' ? 'active' : ''}}"
            bindtap="switchTab"
            data-tab="accepted">
        <text class="tab-text">æˆ‘æ¥çš„</text>
        <text class="tab-count">({{acceptedTotal}})</text>
      </view>
    </view>
  </view>

  <!-- å‘å¸ƒçš„è®¢å•åˆ—è¡¨ -->
  <view class="order-list" wx:if="{{currentTab === 'publish'}}">
    <view class="order-item"
          wx:for="{{publishOrders}}"
          wx:key="id"
          bindtap="viewOrderDetail"
          data-id="{{item.id}}">
      
      <!-- è®¢å•å¤´éƒ¨ -->
      <view class="order-header">
        <view class="order-title">{{item.title}}</view>
        <view class="status-badge" style="background: {{statusMap[item.status].color}}20; color: {{statusMap[item.status].color}}">
          <text class="status-icon">{{statusMap[item.status].icon}}</text>
          <text class="status-name">{{statusMap[item.status].name}}</text>
        </view>
      </view>

      <!-- è®¢å•å†…å®¹ -->
      <view class="order-content">
        <view class="content-row">
          <text class="label">ğŸ“ å–è´§åœ°ç‚¹ï¼š</text>
          <text class="value">{{item.pickup_location}}</text>
        </view>
        <view class="content-row">
          <text class="label">ğŸ“¦ é€è¾¾åœ°ç‚¹ï¼š</text>
          <text class="value">{{item.delivery_location}}</text>
        </view>
        <view class="content-row" wx:if="{{item.acceptor_name}}">
          <text class="label">ğŸ‘¤ æ¥å•äººï¼š</text>
          <text class="value">{{item.acceptor_name}}</text>
        </view>
      </view>

      <!-- è®¢å•åº•éƒ¨ -->
      <view class="order-footer">
        <view class="price">Â¥{{item.price}}</view>
        <view class="time">{{formatTime(item.created_at)}}</view>
      </view>
    </view>

    <!-- åŠ è½½çŠ¶æ€ -->
    <view class="loading-more" wx:if="{{loading && !refreshing}}">
      <text class="loading-text">åŠ è½½ä¸­...</text>
    </view>

    <view class="no-more" wx:if="{{!publishHasMore && publishOrders.length > 0}}">
      <text class="no-more-text">æ²¡æœ‰æ›´å¤šäº†</text>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{!loading && publishOrders.length === 0}}">
      <text class="empty-icon">ğŸ“‹</text>
      <text class="empty-text">æš‚æ— å‘å¸ƒè®°å½•</text>
      <text class="empty-desc">å¿«å»å‘å¸ƒä½ çš„ç¬¬ä¸€ä¸ªè®¢å•å§</text>
    </view>
  </view>

  <!-- æ¥çš„è®¢å•åˆ—è¡¨ -->
  <view class="order-list" wx:if="{{currentTab === 'accepted'}}">
    <view class="order-item"
          wx:for="{{acceptedOrders}}"
          wx:key="id"
          bindtap="viewOrderDetail"
          data-id="{{item.id}}">
      
      <!-- è®¢å•å¤´éƒ¨ -->
      <view class="order-header">
        <view class="order-title">{{item.title}}</view>
        <view class="status-badge" style="background: {{statusMap[item.status].color}}20; color: {{statusMap[item.status].color}}">
          <text class="status-icon">{{statusMap[item.status].icon}}</text>
          <text class="status-name">{{statusMap[item.status].name}}</text>
        </view>
      </view>

      <!-- è®¢å•å†…å®¹ -->
      <view class="order-content">
        <view class="content-row">
          <text class="label">ğŸ“ å–è´§åœ°ç‚¹ï¼š</text>
          <text class="value">{{item.pickup_location}}</text>
        </view>
        <view class="content-row">
          <text class="label">ğŸ“¦ é€è¾¾åœ°ç‚¹ï¼š</text>
          <text class="value">{{item.delivery_location}}</text>
        </view>
        <view class="content-row" wx:if="{{item.publisher_name}}">
          <text class="label">ğŸ‘¤ å‘å¸ƒäººï¼š</text>
          <text class="value">{{item.publisher_name}}</text>
        </view>
      </view>

      <!-- è®¢å•åº•éƒ¨ -->
      <view class="order-footer">
        <view class="price">Â¥{{item.price}}</view>
        <view class="time">{{formatTime(item.accepted_at || item.created_at)}}</view>
      </view>
    </view>

    <!-- åŠ è½½çŠ¶æ€ -->
    <view class="loading-more" wx:if="{{loading && !refreshing}}">
      <text class="loading-text">åŠ è½½ä¸­...</text>
    </view>

    <view class="no-more" wx:if="{{!acceptedHasMore && acceptedOrders.length > 0}}">
      <text class="no-more-text">æ²¡æœ‰æ›´å¤šäº†</text>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{!loading && acceptedOrders.length === 0}}">
      <text class="empty-icon">ğŸ“‹</text>
      <text class="empty-text">æš‚æ— æ¥å•è®°å½•</text>
      <text class="empty-desc">å¿«å»æ¥å•èµšå–ä½£é‡‘å§</text>
    </view>
  </view>
</view>
