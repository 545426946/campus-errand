<view class="page-container">
  <!-- ç»Ÿè®¡å¡ç‰‡ -->
  <view class="stats-card">
    <view class="stats-header">
      <text class="stats-title">å†å²è®°å½•ç»Ÿè®¡</text>
      <view class="clear-btn" bindtap="onClearHistory" wx:if="{{historyList.length > 0}}">
        <text class="clear-text">æ¸…ç©º</text>
      </view>
    </view>
    
    <view class="stats-content">
      <view class="stats-item">
        <text class="stats-number">{{stats.totalCount}}</text>
        <text class="stats-label">æ€»è®¡</text>
      </view>
      <view class="stats-divider"></view>
      <view class="stats-item">
        <text class="stats-number">{{stats.todayCount}}</text>
        <text class="stats-label">ä»Šå¤©</text>
      </view>
      <view class="stats-divider"></view>
      <view class="stats-item">
        <text class="stats-number">{{stats.weekCount}}</text>
        <text class="stats-label">æœ¬å‘¨</text>
      </view>
      <view class="stats-divider"></view>
      <view class="stats-item">
        <text class="stats-number">{{stats.monthCount}}</text>
        <text class="stats-label">æœ¬æœˆ</text>
      </view>
    </view>
  </view>

  <!-- ç­›é€‰æ ‡ç­¾ -->
  <view class="filter-tabs">
    <view class="filter-tab {{filterType === 'all' ? 'active' : ''}}" 
          bindtap="switchFilter" data-type="all">
      <text>å…¨éƒ¨</text>
    </view>
    <view class="filter-tab {{filterType === 'today' ? 'active' : ''}}" 
          bindtap="switchFilter" data-type="today">
      <text>ä»Šå¤©</text>
    </view>
    <view class="filter-tab {{filterType === 'week' ? 'active' : ''}}" 
          bindtap="switchFilter" data-type="week">
      <text>æœ¬å‘¨</text>
    </view>
    <view class="filter-tab {{filterType === 'month' ? 'active' : ''}}" 
          bindtap="switchFilter" data-type="month">
      <text>æœ¬æœˆ</text>
    </view>
  </view>

  <!-- å†å²è®°å½•åˆ—è¡¨ -->
  <view class="history-list" wx:if="{{historyList.length > 0}}">
    <view class="history-item" 
          wx:for="{{historyList}}" 
          wx:key="id"
          bindtap="onHistoryTap"
          data-item="{{item}}">
      
      <view class="item-left">
        <view class="item-icon">
          <text class="icon-text">{{getActionIcon(item.type, item.action)}}</text>
        </view>
        <view class="item-info">
          <text class="item-title">{{getActionText(item.type, item.action)}}</text>
          <text class="item-desc" wx:if="{{item.description}}">{{item.description}}</text>
          <text class="item-time">{{formatTime(item.createTime)}}</text>
        </view>
      </view>
      
      <view class="item-right">
        <text class="item-amount {{item.type === 'wallet' && item.action === 'income' ? 'positive' : item.type === 'wallet' && item.action === 'expense' ? 'negative' : ''}}"
              wx:if="{{item.amount}}">
          {{item.type === 'wallet' && item.action === 'income' ? '+' : ''}}{{item.amount}}
        </text>
        <view class="delete-btn" 
              bindtap="onDeleteItem"
              data-item="{{item}}"
              catchtap="true">
          <text class="delete-icon">ğŸ—‘ï¸</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:elif="{{!loading}}">
    <text class="empty-icon">ğŸ“‹</text>
    <text class="empty-text">æš‚æ— å†å²è®°å½•</text>
    <text class="empty-desc">å¼€å§‹ä½¿ç”¨åå°†æ˜¾ç¤ºæ‚¨çš„æ“ä½œè®°å½•</text>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-state" wx:if="{{loading}}">
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- æ²¡æœ‰æ›´å¤š -->
  <view class="no-more" wx:if="{{!hasMore && historyList.length > 0}}">
    <text class="no-more-text">æ²¡æœ‰æ›´å¤šè®°å½•äº†</text>
  </view>
</view>