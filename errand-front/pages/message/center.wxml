<view class="message-center">
  <!-- æ¶ˆæ¯åˆ—è¡¨ï¼ˆæŒ‰è®¢å•åˆ†ç»„ï¼‰ -->
  <view class="message-list" wx:if="{{messageList.length > 0}}">
    <view 
      class="conversation-item" 
      wx:for="{{messageList}}" 
      wx:key="order_id"
      bindtap="onMessageTap"
      data-order-id="{{item.order_id}}"
    >
      <!-- å¯¹æ–¹ç”¨æˆ·å¤´åƒ -->
      <view class="avatar-wrapper">
        <image 
          class="avatar" 
          src="{{item.other_user_avatar || '/images/user.png'}}" 
          mode="aspectFill"
        ></image>
        <view class="unread-badge" wx:if="{{item.unread_count > 0}}">
          {{item.unread_count > 99 ? '99+' : item.unread_count}}
        </view>
      </view>

      <!-- ä¼šè¯å†…å®¹ -->
      <view class="conversation-content">
        <view class="conversation-header">
          <text class="other-user-name">{{item.other_user_name || 'ç”¨æˆ·'}}</text>
          <text class="message-time">{{item.time_ago}}</text>
        </view>
        
        <view class="last-message">
          <text class="message-text">{{item.last_message}}</text>
        </view>
        
        <view class="order-info">
          <text class="order-label">è®¢å•:</text>
          <text class="order-title">{{item.order_title}}</text>
          <view class="order-status {{item.order_status}}">
            {{item.order_status_text}}
          </view>
        </view>
      </view>

      <!-- å³ä¾§ç®­å¤´ -->
      <view class="arrow-icon">â€º</view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{!loading && messageList.length === 0}}">
    <text class="empty-icon">ğŸ’¬</text>
    <text class="empty-text">æš‚æ— æ¶ˆæ¯</text>
    <text class="empty-hint">æ‚¨çš„è®¢å•æ¶ˆæ¯ä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œ</text>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-state" wx:if="{{loading}}">
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>
</view>
